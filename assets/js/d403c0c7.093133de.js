"use strict";(globalThis.webpackChunkproextend_integration_docs=globalThis.webpackChunkproextend_integration_docs||[]).push([[299],{6732(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"sso","title":"SSO (Single Sign-On)","description":"Introdu\xe7\xe3o","source":"@site/docs/sso.md","sourceDirName":".","slug":"/sso","permalink":"/sso","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"SSO (Single Sign-On)"},"sidebar":"docsSidebar","previous":{"title":"Autentica\xe7\xe3o","permalink":"/autenticacao"},"next":{"title":"Fluxo de Sincroniza\xe7\xe3o","permalink":"/fluxo-de-sincronizacao"}}');var r=s(4848),o=s(8453);const d={sidebar_position:6,title:"SSO (Single Sign-On)"},l="SSO (Single Sign-On)",c={},t=[{value:"Introdu\xe7\xe3o",id:"introdu\xe7\xe3o",level:2},{value:"Fluxo de Autentica\xe7\xe3o",id:"fluxo-de-autentica\xe7\xe3o",level:2},{value:"Gerar Token SSO",id:"gerar-token-sso",level:2},{value:"Endpoint",id:"endpoint",level:3},{value:"Identifica\xe7\xe3o do Usu\xe1rio",id:"identifica\xe7\xe3o-do-usu\xe1rio",level:3},{value:"Par\xe2metros",id:"par\xe2metros",level:3},{value:"expires_in",id:"expires_in",level:4},{value:"single_use",id:"single_use",level:4},{value:"Exemplo de Requisi\xe7\xe3o",id:"exemplo-de-requisi\xe7\xe3o",level:3},{value:"Resposta de Sucesso",id:"resposta-de-sucesso",level:3},{value:"Tipos de Perfil",id:"tipos-de-perfil",level:4},{value:"Revogar Token SSO",id:"revogar-token-sso",level:2},{value:"Endpoint",id:"endpoint-1",level:3},{value:"Par\xe2metros",id:"par\xe2metros-1",level:3},{value:"Exemplo de Requisi\xe7\xe3o",id:"exemplo-de-requisi\xe7\xe3o-1",level:3},{value:"Resposta de Sucesso",id:"resposta-de-sucesso-1",level:3},{value:"Casos de Uso",id:"casos-de-uso",level:2},{value:"Portal Institucional",id:"portal-institucional",level:3},{value:"Email de Convite",id:"email-de-convite",level:3},{value:"Acesso Tempor\xe1rio",id:"acesso-tempor\xe1rio",level:3},{value:"Tratamento de Erros",id:"tratamento-de-erros",level:2},{value:"Usu\xe1rio N\xe3o Encontrado",id:"usu\xe1rio-n\xe3o-encontrado",level:3},{value:"Usu\xe1rio Suspenso",id:"usu\xe1rio-suspenso",level:3},{value:"Par\xe2metro Inv\xe1lido",id:"par\xe2metro-inv\xe1lido",level:3},{value:"Identificador Ausente",id:"identificador-ausente",level:3},{value:"Boas Pr\xe1ticas",id:"boas-pr\xe1ticas",level:2},{value:"Tempo de Expira\xe7\xe3o",id:"tempo-de-expira\xe7\xe3o",level:3},{value:"Tokens de Uso \xdanico",id:"tokens-de-uso-\xfanico",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"sso-single-sign-on",children:"SSO (Single Sign-On)"})}),"\n",(0,r.jsx)(n.h2,{id:"introdu\xe7\xe3o",children:"Introdu\xe7\xe3o"}),"\n",(0,r.jsx)(n.p,{children:"A funcionalidade SSO (Single Sign-On) permite que sistemas externos gerem tokens de acesso para login direto de usu\xe1rios na plataforma ProExtend sem necessidade de credenciais."}),"\n",(0,r.jsx)(n.p,{children:"Casos de uso:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Integra\xe7\xe3o com portais institucionais"}),"\n",(0,r.jsx)(n.li,{children:"Acesso via emails automatizados"}),"\n",(0,r.jsx)(n.li,{children:"Autentica\xe7\xe3o entre sistemas integrados"}),"\n",(0,r.jsx)(n.li,{children:"Convites tempor\xe1rios"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"fluxo-de-autentica\xe7\xe3o",children:"Fluxo de Autentica\xe7\xe3o"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'1. Sistema Externo \u2192 API ProExtend\n   POST /integration/v1/sso/generate-token\n   { "user_code": "PROF001" }\n   \u2193\n2. API ProExtend \u2192 Sistema Externo\n   { "login_url": "https://{{instituicao}}.proextend.com.br/login?token=..." }\n   \u2193\n3. Sistema redireciona usu\xe1rio para login_url\n   \u2193\n4. Usu\xe1rio autentica automaticamente\n'})}),"\n",(0,r.jsx)(n.h2,{id:"gerar-token-sso",children:"Gerar Token SSO"}),"\n",(0,r.jsx)(n.h3,{id:"endpoint",children:"Endpoint"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /integration/v1/sso/generate-token\n"})}),"\n",(0,r.jsx)(n.h3,{id:"identifica\xe7\xe3o-do-usu\xe1rio",children:"Identifica\xe7\xe3o do Usu\xe1rio"}),"\n",(0,r.jsxs)(n.p,{children:["O usu\xe1rio pode ser identificado por ",(0,r.jsx)(n.strong,{children:"email"})," ou ",(0,r.jsx)(n.strong,{children:"code"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user_email": "professor@faculdade.edu.br"\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"ou"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user_code": "PROF001"\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"par\xe2metros",children:"Par\xe2metros"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Campo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Obrigat\xf3rio"}),(0,r.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user_email"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Condicional"}),(0,r.jsxs)(n.td,{children:["Email do usu\xe1rio (obrigat\xf3rio se ",(0,r.jsx)(n.code,{children:"user_code"})," n\xe3o fornecido)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user_code"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Condicional"}),(0,r.jsxs)(n.td,{children:["C\xf3digo do usu\xe1rio (obrigat\xf3rio se ",(0,r.jsx)(n.code,{children:"user_email"})," n\xe3o fornecido)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"expires_in"})}),(0,r.jsx)(n.td,{children:"integer"}),(0,r.jsx)(n.td,{children:"N\xe3o"}),(0,r.jsx)(n.td,{children:"Tempo de expira\xe7\xe3o em segundos (padr\xe3o: 86400)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"single_use"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"N\xe3o"}),(0,r.jsx)(n.td,{children:"Token de uso \xfanico (padr\xe3o: false)"})]})]})]}),"\n",(0,r.jsx)(n.h4,{id:"expires_in",children:"expires_in"}),"\n",(0,r.jsx)(n.p,{children:"Tempo de expira\xe7\xe3o do token em segundos."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"M\xednimo"}),": 60 (1 minuto)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"M\xe1ximo"}),": 31536000 (365 dias)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Padr\xe3o"}),": 86400 (24 horas)"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Exemplos:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["15 minutos: ",(0,r.jsx)(n.code,{children:"900"})]}),"\n",(0,r.jsxs)(n.li,{children:["1 hora: ",(0,r.jsx)(n.code,{children:"3600"})]}),"\n",(0,r.jsxs)(n.li,{children:["7 dias: ",(0,r.jsx)(n.code,{children:"604800"})]}),"\n",(0,r.jsxs)(n.li,{children:["30 dias: ",(0,r.jsx)(n.code,{children:"2592000"})]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"single_use",children:"single_use"}),"\n",(0,r.jsx)(n.p,{children:"Define se o token pode ser usado uma \xfanica vez."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"true"}),": Ap\xf3s primeiro uso, token \xe9 invalidado"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"false"}),": Token reutiliz\xe1vel (padr\xe3o)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"exemplo-de-requisi\xe7\xe3o",children:"Exemplo de Requisi\xe7\xe3o"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user_code": "PROF001",\n  "expires_in": 604800,\n  "single_use": false\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"resposta-de-sucesso",children:"Resposta de Sucesso"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "message": "Token SSO gerado com sucesso.",\n  "data": {\n    "login_url": "https://{{instituicao}}.proextend.com.br/login?token=TbbVa3x8KlMnPqRsUvWxYz...",\n    "user": {\n      "name": "Dr. Jo\xe3o Silva",\n      "profile_type": "professor"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h4,{id:"tipos-de-perfil",children:"Tipos de Perfil"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Valor"}),(0,r.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"admin"})}),(0,r.jsx)(n.td,{children:"Administrador"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"professor"})}),(0,r.jsx)(n.td,{children:"Professor"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"student"})}),(0,r.jsx)(n.td,{children:"Aluno"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"revogar-token-sso",children:"Revogar Token SSO"}),"\n",(0,r.jsx)(n.p,{children:"Revoga tokens SSO de um usu\xe1rio espec\xedfico."}),"\n",(0,r.jsx)(n.h3,{id:"endpoint-1",children:"Endpoint"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"POST /integration/v1/sso/revoke-token\n"})}),"\n",(0,r.jsx)(n.h3,{id:"par\xe2metros-1",children:"Par\xe2metros"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Campo"}),(0,r.jsx)(n.th,{children:"Tipo"}),(0,r.jsx)(n.th,{children:"Obrigat\xf3rio"}),(0,r.jsx)(n.th,{children:"Descri\xe7\xe3o"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user_email"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Condicional"}),(0,r.jsxs)(n.td,{children:["Email do usu\xe1rio (obrigat\xf3rio se ",(0,r.jsx)(n.code,{children:"user_code"})," n\xe3o fornecido)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"user_code"})}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"Condicional"}),(0,r.jsxs)(n.td,{children:["C\xf3digo do usu\xe1rio (obrigat\xf3rio se ",(0,r.jsx)(n.code,{children:"user_email"})," n\xe3o fornecido)"]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"revoke_all"})}),(0,r.jsx)(n.td,{children:"boolean"}),(0,r.jsx)(n.td,{children:"N\xe3o"}),(0,r.jsxs)(n.td,{children:[(0,r.jsx)(n.code,{children:"true"})," = revoga todos tokens (padr\xe3o) / ",(0,r.jsx)(n.code,{children:"false"})," = apenas expirados"]})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"exemplo-de-requisi\xe7\xe3o-1",children:"Exemplo de Requisi\xe7\xe3o"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user_code": "PROF001",\n  "revoke_all": true\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"resposta-de-sucesso-1",children:"Resposta de Sucesso"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": true,\n  "message": "Todos os tokens do usu\xe1rio foram revogados.",\n  "data": {\n    "revoked_count": 3,\n    "user": {\n      "email": "professor@faculdade.edu.br",\n      "profile_type": "professor"\n    }\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"casos-de-uso",children:"Casos de Uso"}),"\n",(0,r.jsx)(n.h3,{id:"portal-institucional",children:"Portal Institucional"}),"\n",(0,r.jsx)(n.p,{children:"Link permanente no portal da institui\xe7\xe3o."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user_code": "PROF001",\n  "expires_in": 7776000,\n  "single_use": false\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Caracter\xedsticas: Expira em 90 dias, reutiliz\xe1vel."}),"\n",(0,r.jsx)(n.h3,{id:"email-de-convite",children:"Email de Convite"}),"\n",(0,r.jsx)(n.p,{children:"Link tempor\xe1rio para primeiro acesso."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user_email": "novoprofessor@faculdade.edu.br",\n  "expires_in": 604800,\n  "single_use": true\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Caracter\xedsticas: Expira em 7 dias, uso \xfanico."}),"\n",(0,r.jsx)(n.h3,{id:"acesso-tempor\xe1rio",children:"Acesso Tempor\xe1rio"}),"\n",(0,r.jsx)(n.p,{children:"Acesso para manuten\xe7\xe3o ou suporte."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "user_code": "ADMIN001",\n  "expires_in": 900,\n  "single_use": true\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"Caracter\xedsticas: Expira em 15 minutos, uso \xfanico."}),"\n",(0,r.jsx)(n.h2,{id:"tratamento-de-erros",children:"Tratamento de Erros"}),"\n",(0,r.jsx)(n.h3,{id:"usu\xe1rio-n\xe3o-encontrado",children:"Usu\xe1rio N\xe3o Encontrado"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "message": "Dados inv\xe1lidos.",\n  "errors": {\n    "user_code": ["Usu\xe1rio n\xe3o encontrado com o c\xf3digo fornecido."]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"usu\xe1rio-suspenso",children:"Usu\xe1rio Suspenso"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "message": "Dados inv\xe1lidos.",\n  "errors": {\n    "user_code": ["O usu\xe1rio est\xe1 suspenso e n\xe3o pode gerar token SSO."]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"par\xe2metro-inv\xe1lido",children:"Par\xe2metro Inv\xe1lido"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "message": "Dados inv\xe1lidos.",\n  "errors": {\n    "expires_in": ["O tempo de expira\xe7\xe3o deve estar entre 60 e 31536000 segundos."]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"identificador-ausente",children:"Identificador Ausente"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "success": false,\n  "message": "Dados inv\xe1lidos.",\n  "errors": {\n    "user_email": ["O email ou c\xf3digo do usu\xe1rio \xe9 obrigat\xf3rio."]\n  }\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"boas-pr\xe1ticas",children:"Boas Pr\xe1ticas"}),"\n",(0,r.jsx)(n.h3,{id:"tempo-de-expira\xe7\xe3o",children:"Tempo de Expira\xe7\xe3o"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Caso de Uso"}),(0,r.jsx)(n.th,{children:"Tempo Recomendado"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Convite de primeiro acesso"}),(0,r.jsx)(n.td,{children:"3-7 dias"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Suporte tempor\xe1rio"}),(0,r.jsx)(n.td,{children:"1-24 horas"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Portal institucional"}),(0,r.jsx)(n.td,{children:"30-90 dias"})]})]})]}),"\n",(0,r.jsx)(n.h3,{id:"tokens-de-uso-\xfanico",children:"Tokens de Uso \xdanico"}),"\n",(0,r.jsxs)(n.p,{children:["Prefira ",(0,r.jsx)(n.code,{children:"single_use: true"})," para:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Convites de primeiro acesso"}),"\n",(0,r.jsx)(n.li,{children:"Redefini\xe7\xe3o de senha"}),"\n",(0,r.jsx)(n.li,{children:"Acessos sens\xedveis"}),"\n",(0,r.jsx)(n.li,{children:"Links em emails"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>d,x:()=>l});var i=s(6540);const r={},o=i.createContext(r);function d(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:d(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);